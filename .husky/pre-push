#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

yarn test || echo '[pre-push] tests failed âŒ'
if [ -z $(git status --porcelain) ];
then
    echo "[pre-push] coverage badge is up-to-date âœ…"
else
    echo "[pre-push] coverage badge was changed âš ï¸"
    git add .
    git commit -m 'test: ğŸ”„ update coverage badge'
    echo "[pre-push] coverage badge is updated ğŸ”„"
    echo "[pre-push] push updated coverage badge ğŸš€"
    git push
fi
